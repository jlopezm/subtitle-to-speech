# gTTS Audio Generation from SRT

This project provides a set of Python scripts to generate audio files from SRT subtitle files using Google Cloud Text-to-Speech (gTTS). The main functionality involves converting SRT content into SSML (Speech Synthesis Markup Language) and then synthesizing these SSML files into MP3 audio.

## Core Functionality

The primary goal of these scripts is to automate the process of creating audio narrations from subtitle files. This is particularly useful for generating voiceovers for videos or presentations where the script is already available in SRT format.

The workflow is as follows:
1. **Generate SSML:** The `generate_ssml.py` script processes an SRT file and, optionally, an alias file to produce one or more SSML files.
2. **Synthesize Audio:** The `ssml_to_audio.py` script takes the generated SSML files and converts each into a corresponding MP3 audio file.

## Scripts Overview

### `generate_ssml.py`

This script is responsible for converting an SRT (SubRip Subtitle) file into SSML. It handles the segmentation of the SRT content into manageable SSML blocks, especially for longer subtitle files, generating multiple SSML files if necessary.

**Key Features:**
- **SRT to SSML Conversion:** Parses an SRT file and extracts the text content.
- **Alias File Support:** Utilizes an `alias.json` file to allow for pronunciation substitutions of specific words or phrases. This is useful for correcting pronunciations or using specific terminology.
- **SSML Segmentation:** Automatically splits the SSML output into multiple files based on size constraints, ensuring compatibility with text-to-speech APIs.

### `ssml_to_audio.py`

This script takes the SSML files generated by `generate_ssml.py` and synthesizes them into MP3 audio files using Google Cloud Text-to-Speech. Each SSML file will result in a separate MP3 file.

**Key Features:**
- **SSML to MP3 Conversion:** Processes SSML input to generate high-quality audio.
- **Customizable Voice and Speed:** The `alias.json` file can also be used to configure the playback speed and the specific Google Text-to-Speech voice to be used for synthesis. This allows for fine-tuning the audio output to match desired characteristics.

### `list_voices.py`

This utility script helps in discovering available Google Cloud Text-to-Speech voices. It lists all the voices that can be used with the `ssml_to_audio.py` script, along with their language codes and genders. This is useful for selecting the appropriate voice for your audio generation needs. It requires a path to your Google Cloud service account JSON key file.

## `alias.json` Configuration

The `alias.json` file is a crucial configuration file that allows for customization of the audio generation process:

- **Word/Phrase Substitution:** Define aliases to replace specific words or phrases from the SRT file with alternative pronunciations or text.
- **Playback Speed:** Adjust the speaking rate of the synthesized audio.
- **Google Text-to-Speech Voice:** Specify the desired voice for the audio output (e.g., `en-US-Wavenet-A`).

Example `alias.json` structure:

```json
{
  "aliases": {
    "word_to_replace": "replacement_pronunciation",
    "another_word": "another_replacement"
  },
  "voice_settings": {
    "language_code": "en-US",
    "name": "en-US-Wavenet-D",
    "speaking_rate": 1.0
  }
}
```

## Google Cloud Setup

To use these scripts, you need to set up a Google Cloud project and enable the Text-to-Speech API. Follow these steps to create a service account key:

1.  **Create a Google Cloud Project:** If you don't have one, create a new project in the Google Cloud Console.
2.  **Enable the Text-to-Speech API:**
    *   In the Google Cloud Console, navigate to "APIs & Services" > "Library".
    *   Search for "Cloud Text-to-Speech API" and enable it.
3.  **Create a Service Account:**
    *   In the Google Cloud Console, go to "IAM & Admin" > "Service Accounts".
    *   Click "Create Service Account".
    *   Provide a Service Account name and description.
    *   Grant the service account the "Cloud Text-to-Speech User" role (or a custom role with `texttospeech.synthesize` permission).
4.  **Generate a JSON Key:**
    *   After creating the service account, click on the three dots under "Actions" for your new service account and select "Manage keys".
    *   Click "Add Key" > "Create new key".
    *   Select "JSON" as the key type and click "Create".
    *   A JSON file containing your credentials will be downloaded. And place it in the root directory of this project.**
    *   You can explicitly load the credentials in your Python scripts.

## Usage Workflow

1. **Prepare your SRT file:** Ensure your subtitle file is in `.srt` format.
2. **(Optional) Configure `alias.json`:** If you need to substitute words, change voice, or adjust speed, modify `alias.json`.
3. **Generate SSML files:**
   ```bash
   python generate_ssml.py --srt_path your_subtitle_file.srt --alias_path alias.json --output_ssml_path output.ssml
   ```
   This will create `output.ssml` or `output_partX.ssml` files.
4. **List available voices:**
   ```bash
   python list_voices.py --creds_path /path/to/your/credentials.json
   ```
   This will list available Google Cloud Text-to-Speech voices, filtered by language.

5. **Generate MP3 audio files:**
   ```bash
   python ssml_to_audio.py --creds_path /path/to/your/credentials.json
   ```
   This script will iterate through all `.ssml` files in the current directory and generate corresponding `.mp3` audio files.

Alternatively, you can integrate these steps into a single script or a shell command for batch processing.
